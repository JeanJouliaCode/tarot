{"version":3,"sources":["assets/refresh.svg","components/Avatar.tsx","components/Text.tsx","components/Button.tsx","services/firebase.tsx","services/localStorage.tsx","services/functions.tsx","services/utils.tsx","pages/Home.tsx","hooks/useGame.tsx","assets/cross.svg","assets/crown.png","pages/Lobby.tsx","App.tsx","reportWebVitals.ts","index.tsx"],"names":["Avatar","url","outline","small","refreshAvatar","className","src","alt","onClick","refreshIcon","defaultProps","Text","content","Button","label","disabled","app","initializeApp","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","db","getFirestore","functions","getFunctions","connectFunctionsEmulator","connectFirestoreEmulator","savePlayerID","id","localStorage","setItem","getPlayerID","getItem","createGame","userID","userName","a","body","httpsCallable","firebase","response","data","joinGame","gameID","generateID","Math","random","toString","substring","generateAvatarUrl","AvatarGenerator","generateRandomAvatar","replace","UsernameGenerator","require","Home","invited","basePseudo","generateUsername","useState","avatarUrl","setAvatarUrl","pseudo","setPseudo","redirect","setRedirect","setGameID","setDisabled","useParams","create","then","catch","ID","to","type","onChange","event","target","value","placeholder","useGame","setData","isPending","setIsPending","error","useEffect","unsubscribe","onSnapshot","doc","console","log","Lobby","setError","isUserAdmin","user","users","find","admin","blackList","includes","startText","window","screen","width","location","hostname","navigator","clipboard","writeText","err","List","deleteUser","userAdminOrNot","kickUser","map","index","name","crown","cross","App","path","element","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"0WAAe,G,MAAA,IAA0B,qC,OCiB1B,SAASA,EAAT,GAAgE,IAA/CC,EAA8C,EAA9CA,IAAIC,EAA0C,EAA1CA,QAAQC,EAAkC,EAAlCA,MAAOC,EAA2B,EAA3BA,cAMjD,OACE,sBAAKC,UAAU,SAAf,UACE,qBAAKA,UAAS,UAAKF,EAAO,wBAAyB,kBAArC,YAA0DD,EAAU,kBAAoB,IAAtG,SACE,qBAAKI,IAAKL,EAAKM,IAAI,cAAeF,UAAU,qBAE3CD,GAAiB,wBAAQC,UAAU,kBAAkBG,QAT5C,WACdJ,KAQsB,SAClB,qBAAKE,IAAKG,EAAaF,IAAI,wBAnBnCP,EAAOU,aAAe,CACpBT,IAAK,KACLC,SAAS,EACTC,OAAO,EACPC,cAAe,M,YCRF,SAASO,EAAT,GAAmC,IAApBC,EAAmB,EAAnBA,QAC5B,OACE,sBAAMP,UAAU,OAAhB,SAAwBO,ICKb,SAASC,EAAT,GAAsD,IAArCC,EAAoC,EAApCA,MAAMN,EAA8B,EAA9BA,QAAQO,EAAsB,EAAtBA,SAC5C,OACE,wBAAQV,UAAS,iBAAYU,EAAU,kBAAkB,IAAMP,QAASA,EAAxE,SACE,cAAC,EAAD,CAAMI,QAASE,MAPrBD,EAAOH,aAAe,CACpBK,UAAU,G,4BCWNC,EAAMC,YAXW,CACrBC,OAAQ,0CACRC,WAAY,8BACZC,UAAW,cACXC,cAAe,0BACfC,kBAAmB,eACnBC,MAAO,4CACPC,cAAe,iBAKXC,EAAKC,cACLC,EAAYC,YAAaZ,GAC/Ba,YAAyBF,EAAW,YAAa,MACjDG,YAAyBL,EAAI,YAAa,MAC3B,OAACA,KAAGT,MAAIW,aC1BhB,SAASI,EAAaC,GAC3BC,aAAaC,QAAQ,SAAUF,GAG1B,SAASG,IACd,OAAOF,aAAaG,QAAQ,U,SCDfC,E,kFAAf,WAA0BpC,EAAeqC,EAAiBC,GAA1D,iBAAAC,EAAA,6DACQC,EAAQ,CAACxC,MAAMqC,SAASC,YAE9BR,EAAaO,GAHf,SAIyBI,YAAcC,EAAShB,UAAW,aAAlCe,CAAgDD,GAJzE,cAIQG,EAJR,yBAMSA,EAASC,MANlB,4C,+BASeC,E,oFAAf,WAAwB7C,EAAeqC,EAAiBC,EAAmBQ,GAA3E,iBAAAP,EAAA,6DACQC,EAAQ,CAACxC,MAAMqC,SAASC,WAAWQ,UAEzChB,EAAaO,GAHf,SAIyBI,YAAcC,EAAShB,UAAW,WAAlCe,CAA8CD,GAJvE,cAIQG,EAJR,yBAMSA,EAASC,MANlB,4C,kEASA,WAAwBP,EAAgBS,GAAxC,iBAAAP,EAAA,6DACQC,EAAQ,CAACH,SAAOS,UADxB,SAGyBL,YAAcC,EAAShB,UAAW,WAAlCe,CAA8CD,GAHvE,cAGQG,EAHR,yBAKSA,EAASC,MALlB,4C,kCCpBO,SAASG,IACd,OAAOC,KAAKC,SAASC,WAAWC,UAAU,GAGrC,SAASC,IAGd,OAFkB,IAAIC,mBACKC,uBACVC,QAAQ,SAAS,e,YCEhCC,G,MAAoBC,EAAQ,KAOhCC,EAAKjD,aAAe,CAClBkD,SAAS,GAIX,IAAMC,EAAaJ,EAAkBK,mBAEtB,SAASH,EAAT,GAAmC,IAApBC,EAAmB,EAAnBA,QAAmB,EACZG,mBAASV,KADG,mBACxCW,EADwC,KAC5BC,EAD4B,OAElBF,mBAASF,GAFS,mBAExCK,EAFwC,KAE/BC,EAF+B,OAGdJ,oBAAS,GAHK,mBAGxCK,EAHwC,KAG7BC,EAH6B,OAIlBN,mBAAS,IAJS,mBAIxChB,EAJwC,KAI/BuB,EAJ+B,OAKdP,oBAAS,GALK,mBAKxChD,EALwC,KAK7BwD,EAL6B,KAMzCvC,EAAOwC,cAAPxC,GAGAyC,EAAM,uCAAG,sBAAAjC,EAAA,sDACb+B,GAAY,GACTX,EACDd,EAASkB,EAAYhB,IAAb,OAA4BkB,QAA5B,IAA4BA,IAAUL,EAAa7B,GAAK0C,MAAK,WACnEL,GAAY,MACXM,OAAM,WACPJ,GAAY,MAIdlC,EAAW2B,EAAYhB,IAAb,OAA4BkB,QAA5B,IAA4BA,IAAUL,GAAYa,MAAK,SAACE,GAC/C,kBAAPA,GAAgBN,EAAUM,GACpCP,GAAY,MACXM,OAAM,WACPJ,GAAY,MAdH,2CAAH,qDAmBZ,GAAIH,IAAaR,EACf,OAAO,cAAC,IAAD,CAAUiB,GAAE,gBAAW9B,KAG3B,GAAIqB,GAAYR,EACnB,OAAO,cAAC,IAAD,CAAUiB,GAAE,mBAAc7C,KAOnC,OACA,qBAAK3B,UAAU,YAAf,SACI,sBAAKA,UAAU,kBAAf,UACE,qBAAKA,UAAU,QAAf,SAAuB,cAAC,EAAD,CAAMO,QAAQ,YACpCgD,GAAW,qBAAKvD,UAAU,GAAf,SAAkB,cAAC,EAAD,CAAMO,QAAQ,2BAC5C,sBAAKP,UAAU,0CAAf,UACE,cAAC,EAAD,CAAQD,cAVI,WAClB6D,EAAaZ,MAS6BpD,IAAK+D,IACzC,sBAAK3D,UAAU,0CAAf,UACE,cAAC,EAAD,CAAMO,QAAQ,kCACd,uBAAOkE,KAAK,OAAOzE,UAAU,eAAe0E,SAAU,SAAAC,GAAK,OAAIb,EAAUa,EAAMC,OAAOC,QAAQC,YAAatB,IAC3G,cAAC,EAAD,CAAQ9C,SAAUA,EAAUD,MAAO8C,EAAU,OAAS,cAAepD,QAASiE,eCvE1F,IAkBeW,EAlBC,SAACpD,GAAiB,IAAD,EACP+B,qBADO,mBACxBlB,EADwB,KAClBwC,EADkB,OAEGtB,oBAAS,GAFZ,mBAExBuB,EAFwB,KAEbC,EAFa,OAGLxB,mBAAS,MAHJ,mBAGxByB,EAHwB,UAe/B,OAVAC,qBAAU,WACR,IAAMC,EAAcC,YAAWC,YAAIjD,EAASlB,GAAG,QAASO,IAAK,SAAC4D,GAC5DP,EAAQO,EAAI/C,QACZgD,QAAQC,IAAIjD,GACZ0C,GAAa,MAGf,OAAO,kBAAMG,OACZ,IAEI,CAAE7C,OAAMyC,YAAWE,UCnBb,MAA0B,kCCA1B,MAA0B,kC,MCe1B,SAASO,IAAQ,IAAD,IACFhC,mBAAS,IADP,mBACtByB,EADsB,KACdQ,EADc,OAEIjC,oBAAS,GAFb,mBAEtBK,EAFsB,KAEXC,EAFW,KAIvBrC,EAAOwC,cAAPxC,GAJuB,EAMkBoD,EAAO,OAACpD,QAAD,IAACA,IAAM,IAAvBa,GANT,EAMrB2C,MANqB,EAMFF,UANE,EAMSzC,MAEtC,GAAIuB,EACF,OAAO,cAAC,IAAD,CAAUS,GAAE,WAGrB,IAeMoB,EAAc,WAClB,IAAMC,EAAI,OAAGrD,QAAH,IAAGA,OAAH,EAAGA,EAAMsD,MAAMC,MAAK,SAACF,GAAD,OAAeA,EAAKlE,KAAOG,OAEzD,QAAG+D,MACO,OAACA,QAAD,IAACA,OAAD,EAACA,EAAMG,SAMZ,OAAJxD,QAAI,IAAJA,OAAA,EAAAA,EAAMyD,aAAN,OAAmBzD,QAAnB,IAAmBA,OAAnB,EAAmBA,EAAMyD,UAAUC,SAASpE,OAC7CkC,GAAY,GAGd,IAAImC,EAAY,iBAGhB,OAFGC,OAAOC,OAAOC,OAAS,MAAKH,EAAY,SAGzC,qBAAKnG,UAAU,aAAf,SACE,sBAAKA,UAAU,mBAAf,UACE,qBAAKA,UAAU,QAAf,SAAuB,cAAC,EAAD,CAAMO,QAAQ,YACrC,sBAAKP,UAAU,gBAAf,UACE,cAAC,EAAD,CAAQS,MAAM,SAASN,QArCd,WACfwF,EAAS,IACT,IAAM/F,EAAG,ULhBL,GAAN,OAAuC,cAA7BwG,OAAOG,SAASC,SAA0B,yBAA2B,wCKgBpE,kBAA4B7E,GAErC8E,UAAUC,UAAUC,UAAU/G,GAAKyE,MAAK,WACtCsB,EAAS,mBACR,SAASiB,GACVjB,EAAS,8BA+BL,cAAC,EAAD,CAAMpF,QAAS4E,OAEhB0B,EAAI,iBAACrE,QAAD,IAACA,OAAD,EAACA,EAAMsD,aAAP,QAAgB,GAAGnE,GACxB,sBAAK3B,UAAU,2CAAf,UACG4F,KAAiB,qBAAK5F,UAAU,uBAAf,SAAsC,cAAC,EAAD,CAAMO,QAAQ,sBACrEqF,KAAiB,cAAC,EAAD,CAAQnF,MAAO0F,EAAWhG,QAhClC,WAChBqF,QAAQC,IAAI,oBAuChB,SAASoB,EAAKf,EAAgBpD,GAE5B,IAAMoE,EAAa,SAACnF,GAClB,IAAMkE,EAAOC,EAAMC,MAAM,SAAAF,GAAI,OAAIA,EAAKlE,KAAOA,KACvCoF,EAAiBjB,EAAMC,MAAM,SAAAF,GAAI,OAAIA,EAAKlE,KAAOG,OAEpD+D,IAASA,EAAKG,OAASe,EAAef,O,sCACvCgB,CAASrF,EAAGe,IAQhB,OACE,qBAAK1C,UAAU,cAAf,SACG8F,EAAMmB,KAAI,SAACpB,EAAOqB,GAAR,OACT,sBAAKlH,UAAU,cAAf,UACE,cAAC,EAAD,CAAQJ,IAAKiG,EAAKjG,IAAKE,OAAO,IAC9B,qBAAKE,UAAU,mBACf,cAAC,EAAD,CAAMO,QAAO,OAAEsF,QAAF,IAAEA,OAAF,EAAEA,EAAMsB,QACnBtB,EAAKG,SAVJF,EAAMC,MAAK,SAACF,GAAD,OAASA,EAAKlE,KAAOG,OAAekE,QAUhB,qBAChC9F,IAAI,cACJC,QAAS,WAAK2G,EAAWjB,EAAKlE,KAC9B1B,IAAK4F,EAAKG,MAAQoB,EAAQC,EAC1BrH,UAAS,qBAAiB6F,EAAKG,MAA8B,GAAvB,4BARRkB,Q,YCtE3BI,MAdf,WACE,OACE,cAAC,IAAD,UACA,8BACE,eAAC,IAAD,WACE,cAAC,IAAD,CAAOC,KAAK,aAAaC,QAAS,cAAC,EAAD,MAClC,cAAC,IAAD,CAAOD,KAAK,cAAcC,QAAS,cAAC,EAAD,CAAMjE,SAAS,MAClD,cAAC,IAAD,CAAOgE,KAAK,IAAIC,QAAS,cAAC,EAAD,cCLlBC,EAZS,SAACC,GACnBA,GAAeA,aAAuBC,UACxC,6BAAqBtD,MAAK,YAAkD,IAA/CuD,EAA8C,EAA9CA,OAAQC,EAAsC,EAAtCA,OAAQC,EAA8B,EAA9BA,OAAQC,EAAsB,EAAtBA,OAAQC,EAAc,EAAdA,QAC3DJ,EAAOF,GACPG,EAAOH,GACPI,EAAOJ,GACPK,EAAOL,GACPM,EAAQN,OCFdO,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,SAM1BZ,M","file":"static/js/main.d21f5a23.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/refresh.91424661.svg\";","import 'styles/Avatar.scss'\r\nimport refreshIcon from 'assets/refresh.svg'\r\n\r\ninterface AvatarProps {\r\n  url: string;\r\n  outline: boolean;\r\n  small: boolean;\r\n  refreshAvatar:Function;\r\n}\r\n\r\nAvatar.defaultProps = {\r\n  url: null,\r\n  outline: false,\r\n  small: false,\r\n  refreshAvatar: null\r\n};\r\n\r\nexport default function Avatar({url,outline,small ,refreshAvatar}:AvatarProps){\r\n\r\n  const refresh = ()=>{\r\n    refreshAvatar()\r\n  }\r\n\r\n  return (\r\n    <div className=\"avatar\">\r\n      <div className={`${small ?'avatar__wrapper_small': 'avatar__wrapper'} ${outline ? 'avatar--outined' : ''}`}>\r\n        <img src={url} alt=\"avatar face\"  className=\"avatar__face\"/>\r\n      </div>\r\n      {!!refreshAvatar && <button className=\"avatar__refresh\" onClick={refresh}>\r\n        <img src={refreshIcon} alt=\"refresh avatar\" />\r\n      </button>}\r\n    </div>\r\n  )\r\n}\r\n","import \"styles/Text.scss\"\r\n\r\ninterface TextProps {\r\n  content: string;\r\n}\r\n\r\nexport default function Text({content}:TextProps){\r\n  return (\r\n    <span className=\"text\">{content}</span>\r\n  )\r\n}","import \"styles/Button.scss\"\r\nimport Text from \"components/Text\"\r\n\r\ninterface ButtonProps {\r\n  label: string;\r\n  onClick: () => void;\r\n  disabled: boolean;\r\n}\r\n\r\nButton.defaultProps = {\r\n  disabled: false,\r\n};\r\n\r\nexport default function Button({label,onClick,disabled}:ButtonProps){\r\n  return(\r\n    <button className={`button ${disabled ?'button_disabled':''}`} onClick={onClick}>\r\n      <Text content={label}/>\r\n    </button>\r\n  )\r\n}","import { initializeApp } from \"firebase/app\";\r\nimport { getFirestore,connectFirestoreEmulator } from \"firebase/firestore\";\r\nimport { getFunctions, connectFunctionsEmulator } from \"firebase/functions\";\r\n\r\n\r\n// TODO: Add SDKs for Firebase products that you want to use\r\n// https://firebase.google.com/docs/web/setup#available-libraries\r\n\r\n// Your web app's Firebase configuration\r\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\r\nconst firebaseConfig = {\r\n  apiKey: \"AIzaSyBrV54oJIM0agz-WbQ5epUkCCQoQ6f-J7M\",\r\n  authDomain: \"tarot-b3e06.firebaseapp.com\",\r\n  projectId: \"tarot-b3e06\",\r\n  storageBucket: \"tarot-b3e06.appspot.com\",\r\n  messagingSenderId: \"472741955571\",\r\n  appId: \"1:472741955571:web:26c8fcc9608d78a28af486\",\r\n  measurementId: \"G-2RHRYPTBEH\"\r\n};\r\n\r\n// Initialize Firebase\r\nconst app = initializeApp(firebaseConfig);\r\nconst db = getFirestore()\r\nconst functions = getFunctions(app)\r\nconnectFunctionsEmulator(functions, \"localhost\", 5001);\r\nconnectFirestoreEmulator(db, 'localhost', 8080);\r\nexport default {db,app,functions};\r\n\r\n","export function savePlayerID(id : string){\r\n  localStorage.setItem('userID', id);\r\n}\r\n\r\nexport function getPlayerID(){\r\n  return localStorage.getItem('userID');\r\n}\r\n\r\n","import firebase from 'services/firebase'\r\nimport {  httpsCallable } from 'firebase/functions';\r\nimport {savePlayerID} from 'services/localStorage'\r\n\r\nasync function createGame(url : string , userID: string , userName: string){\r\n  const body  = {url , userID , userName}\r\n\r\n  savePlayerID(userID)\r\n  const response = await httpsCallable(firebase.functions ,'createGame')(body);\r\n  \r\n  return response.data\r\n}\r\n\r\nasync function joinGame(url : string , userID: string , userName: string , gameID : string){\r\n  const body  = {url , userID , userName , gameID}\r\n  \r\n  savePlayerID(userID)\r\n  const response = await httpsCallable(firebase.functions ,'joinGame')(body);\r\n  \r\n  return response.data\r\n}\r\n\r\nasync function kickUser(userID: string, gameID : string){\r\n  const body  = {userID,gameID}\r\n\r\n  const response = await httpsCallable(firebase.functions ,'kickUser')(body);\r\n  \r\n  return response.data\r\n}\r\n\r\n\r\nexport {createGame,joinGame,kickUser}","import { AvatarGenerator } from 'random-avatar-generator';\r\n\r\nexport function generateID(){\r\n  return Math.random().toString().substring(2)\r\n}\r\n\r\nexport function generateAvatarUrl(){\r\n  const generator = new AvatarGenerator();\r\n  let avatarUrl =  generator.generateRandomAvatar()\r\n  return avatarUrl.replace(\"Circle\",\"Transparent\") \r\n}\r\n\r\nexport function getUrlBase(){\r\n  return `${window.location.hostname === 'localhost' ?'http://localhost:3000/' : 'https://tarot-b3e06.firebaseapp.com/'}`\r\n}\r\n","import Avatar from 'components/Avatar'\r\nimport Button from 'components/Button'\r\nimport Text from 'components/Text'\r\nimport {useState} from 'react'\r\nimport {createGame,joinGame} from 'services/functions'\r\nimport {generateID , generateAvatarUrl} from 'services/utils'\r\nimport { Navigate } from 'react-router-dom'\r\nimport {\r\n  useParams\r\n} from \"react-router-dom\";\r\nimport 'styles/Home.scss'\r\nvar UsernameGenerator = require('username-generator');\r\n\r\n\r\ninterface HomeProps {\r\n  invited: boolean;\r\n}\r\n\r\nHome.defaultProps = {\r\n  invited: false,\r\n};\r\n\r\n\r\nconst basePseudo = UsernameGenerator.generateUsername();\r\n\r\nexport default function Home({invited}:HomeProps){\r\n  const [avatarUrl , setAvatarUrl] = useState(generateAvatarUrl())\r\n  const [pseudo , setPseudo] = useState(basePseudo)\r\n  const [redirect , setRedirect] = useState(false)\r\n  const [gameID , setGameID] = useState('')\r\n  const [disabled , setDisabled] = useState(false)\r\n  let { id } = useParams<string>();\r\n\r\n\r\n  const create = async ()=>{\r\n    setDisabled(true)\r\n    if(invited){\r\n      joinGame(avatarUrl , generateID() , pseudo ?? basePseudo , id!).then(()=>{\r\n        setRedirect(true)\r\n      }).catch(()=>{\r\n        setDisabled(false)\r\n      })\r\n    }\r\n    else{\r\n      createGame(avatarUrl , generateID() , pseudo ?? basePseudo).then((ID)=>{\r\n        if(typeof ID === 'string')setGameID(ID)\r\n        setRedirect(true)\r\n      }).catch(()=>{\r\n        setDisabled(false)\r\n      })\r\n    }\r\n  }\r\n\r\n  if (redirect && !invited) {\r\n    return <Navigate to={`lobby/${gameID}`} />\r\n  }\r\n\r\n  else if (redirect && invited) {\r\n    return <Navigate to={`../lobby/${id}`} />\r\n  }\r\n\r\n  const generateUrl = ()=>{\r\n    setAvatarUrl(generateAvatarUrl())\r\n  }\r\n\r\n  return(\r\n  <div className=\"page home\">\r\n      <div className=\"home__container\">\r\n        <div className=\"title\"><Text content=\"Tarot\"/></div>\r\n        {invited && <div className=\"\"><Text content=\"You've been invited!\"/></div>}\r\n        <div className=\"home__avatar_container pseudo_container\">\r\n          <Avatar refreshAvatar={generateUrl} url={avatarUrl}/>\r\n          <div className=\"home__pseudo_container avatar_container\">\r\n            <Text content=\"Choose a character and a name\"/>\r\n            <input type=\"text\" className=\"home__pseudo\" onChange={event => setPseudo(event.target.value)} placeholder={basePseudo}/>\r\n            <Button disabled={disabled} label={invited ? 'Join' : 'Create game'} onClick={create}/>\r\n          </div>\r\n        </div>\r\n      </div>\r\n  </div>\r\n  )\r\n}\r\n","import firebase from 'services/firebase'\r\nimport { doc, DocumentData, onSnapshot } from \"firebase/firestore\"; \r\nimport { useState, useEffect } from 'react';\r\n\r\nconst useGame = (id : string) => {\r\n  const [data, setData] = useState<DocumentData>();\r\n  const [isPending, setIsPending] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => { \r\n    const unsubscribe = onSnapshot(doc(firebase.db,'games' ,id), (doc)=>{\r\n      setData(doc.data())\r\n      console.log(data)\r\n      setIsPending(false)\r\n    })\r\n\r\n    return () => unsubscribe()\r\n  }, []);\r\n\r\n  return { data, isPending, error };\r\n}\r\n \r\nexport default useGame;","export default __webpack_public_path__ + \"static/media/cross.d29624d7.svg\";","export default __webpack_public_path__ + \"static/media/crown.653bacee.png\";","import {useState} from 'react'\r\nimport useGame from 'hooks/useGame'\r\nimport Text from 'components/Text'\r\nimport Avatar from 'components/Avatar'\r\nimport Button from 'components/Button'\r\nimport { getUrlBase  } from 'services/utils'\r\nimport {getPlayerID} from 'services/localStorage'\r\nimport {kickUser} from 'services/functions'\r\nimport cross from 'assets/cross.svg'\r\nimport crown from 'assets/crown.png'\r\nimport 'styles/Lobby.scss'\r\nimport {\r\n  useParams,Navigate\r\n} from \"react-router-dom\";\r\n\r\nexport default function Lobby(){\r\n  const [error , setError] = useState('');\r\n  const [redirect , setRedirect] = useState(false);\r\n\r\n  let { id } = useParams<string>();\r\n\r\n  const { error: fetchError, isPending, data } = useGame(id ?? '')\r\n\r\n  if (redirect) {\r\n    return <Navigate to={`../../`} />\r\n  }\r\n\r\n  const copyLink = ()=>{\r\n    setError('');\r\n    const url = `${getUrlBase()}invite/${id}`\r\n \r\n    navigator.clipboard.writeText(url).then(function() {\r\n      setError('Link copied!');\r\n    }, function(err) {\r\n      setError('An error has occured');\r\n    });\r\n  }\r\n\r\n  const startGame = ()=>{\r\n    console.log('start')\r\n  }\r\n\r\n  const isUserAdmin = ()=>{\r\n    const user = data?.users.find((user : any)=> user.id === getPlayerID())\r\n\r\n    if(user){\r\n      return !!user?.admin\r\n    }\r\n\r\n    return false\r\n  }\r\n\r\n  if(data?.blackList && data?.blackList.includes(getPlayerID())){\r\n    setRedirect(true)\r\n  }\r\n\r\n  let startText = \"Start the game\"\r\n  if(window.screen.width <= 636) startText = 'Start'\r\n\r\n  return(\r\n    <div className=\"page lobby\">\r\n      <div className=\"lobby__container\">\r\n        <div className=\"title\"><Text content=\"Tarot\"/></div>\r\n        <div className=\"lobby__invite\">        \r\n          <Button label=\"Invite\" onClick={copyLink}/>\r\n          <Text content={error}/>\r\n        </div>\r\n        {List(data?.users ?? [],id!)}\r\n        <div className=\"lobby__start_container lobby_item_mobile\">\r\n          {isUserAdmin() && <div className=\"lobby__start_message\"><Text content=\"Ready to play ?\"/></div>}\r\n          {isUserAdmin() && <Button label={startText} onClick={startGame}/>}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\n\r\nfunction List(users : any[] , gameID : string){\r\n\r\n  const deleteUser = (id : string)=>{\r\n    const user = users.find((user => user.id === id))\r\n    const userAdminOrNot = users.find((user => user.id === getPlayerID()))\r\n\r\n    if(user && !user.admin && userAdminOrNot.admin){\r\n      kickUser(id,gameID)\r\n    }\r\n  }\r\n\r\n  const isUserAdmin = ()=>{\r\n    return !!users.find((user)=> user.id === getPlayerID()).admin\r\n  }\r\n\r\n  return (\r\n    <div className=\"lobby__list\">\r\n      {users.map((user , index)=>(\r\n        <div className=\"lobby__item\" key={index}>\r\n          <Avatar url={user.url} small={true}/>\r\n          <div className=\"lobby__spacing\"></div>\r\n          <Text content={user?.name}/>\r\n          {(user.admin || isUserAdmin()) && <img \r\n            alt=\"remove user\"\r\n            onClick={()=>{deleteUser(user.id)}} \r\n            src={user.admin ? crown : cross}\r\n            className={`lobby__svg ${!user.admin ?'lobby__svg_clickable':''}`}\r\n          />}\r\n        </div>\r\n      ))}\r\n    </div>\r\n  )\r\n}","\nimport './App.scss';\nimport Home from 'pages/Home'\nimport Lobby from 'pages/Lobby'\nimport 'services/firebase'\n\nimport {\n  BrowserRouter as Router,\n  Routes,\n  Route,\n} from \"react-router-dom\";\n\nfunction App() {\n  return (\n    <Router>\n    <div>\n      <Routes>\n        <Route path=\"/lobby/:id\" element={<Lobby />} />\n        <Route path=\"/invite/:id\" element={<Home invited={true}/>} />\n        <Route path=\"/\" element={<Home />} />\n      </Routes>\n    </div>\n  </Router>\n  );\n}\n\nexport default App;\n","import { ReportHandler } from 'web-vitals';\n\nconst reportWebVitals = (onPerfEntry?: ReportHandler) => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\n//import firebase from 'service/firebase'\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}