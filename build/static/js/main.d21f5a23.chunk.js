(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{44:function(t,e,n){},45:function(t,e,n){},47:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},60:function(t,e){},61:function(t,e,n){},65:function(t,e,n){},66:function(t,e,n){"use strict";n.r(e);var a=n(5),c=n.n(a),r=n(37),i=n.n(r),s=(n(44),n(45),n(0)),o=n.n(s),u=n(3),l=n(12),b=(n(47),n.p+"static/media/refresh.91424661.svg"),d=n(6);function j(t){var e=t.url,n=t.outline,a=t.small,c=t.refreshAvatar;return Object(d.jsxs)("div",{className:"avatar",children:[Object(d.jsx)("div",{className:"".concat(a?"avatar__wrapper_small":"avatar__wrapper"," ").concat(n?"avatar--outined":""),children:Object(d.jsx)("img",{src:e,alt:"avatar face",className:"avatar__face"})}),!!c&&Object(d.jsx)("button",{className:"avatar__refresh",onClick:function(){c()},children:Object(d.jsx)("img",{src:b,alt:"refresh avatar"})})]})}j.defaultProps={url:null,outline:!1,small:!1,refreshAvatar:null};n(49),n(50);function f(t){var e=t.content;return Object(d.jsx)("span",{className:"text",children:e})}function v(t){var e=t.label,n=t.onClick,a=t.disabled;return Object(d.jsx)("button",{className:"button ".concat(a?"button_disabled":""),onClick:n,children:Object(d.jsx)(f,{content:e})})}v.defaultProps={disabled:!1};var O=n(38),p=n(27),m=n(22),h=Object(O.a)({apiKey:"AIzaSyBrV54oJIM0agz-WbQ5epUkCCQoQ6f-J7M",authDomain:"tarot-b3e06.firebaseapp.com",projectId:"tarot-b3e06",storageBucket:"tarot-b3e06.appspot.com",messagingSenderId:"472741955571",appId:"1:472741955571:web:26c8fcc9608d78a28af486",measurementId:"G-2RHRYPTBEH"}),x=Object(p.c)(),_=Object(m.b)(h);Object(m.a)(_,"localhost",5001),Object(p.a)(x,"localhost",8080);var g={db:x,app:h,functions:_};function y(t){localStorage.setItem("userID",t)}function N(){return localStorage.getItem("userID")}function k(t,e,n){return w.apply(this,arguments)}function w(){return(w=Object(u.a)(o.a.mark((function t(e,n,a){var c,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return c={url:e,userID:n,userName:a},y(n),t.next=4,Object(m.c)(g.functions,"createGame")(c);case 4:return r=t.sent,t.abrupt("return",r.data);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function S(t,e,n,a){return I.apply(this,arguments)}function I(){return(I=Object(u.a)(o.a.mark((function t(e,n,a,c){var r,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={url:e,userID:n,userName:a,gameID:c},y(n),t.next=4,Object(m.c)(g.functions,"joinGame")(r);case 4:return i=t.sent,t.abrupt("return",i.data);case 6:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function C(){return(C=Object(u.a)(o.a.mark((function t(e,n){var a,c;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a={userID:e,gameID:n},t.next=3,Object(m.c)(g.functions,"kickUser")(a);case 3:return c=t.sent,t.abrupt("return",c.data);case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var D=n(39);function P(){return Math.random().toString().substring(2)}function A(){return(new D.AvatarGenerator).generateRandomAvatar().replace("Circle","Transparent")}var T=n(11),B=(n(61),n(62));L.defaultProps={invited:!1};var J=B.generateUsername();function L(t){var e=t.invited,n=Object(a.useState)(A()),c=Object(l.a)(n,2),r=c[0],i=c[1],s=Object(a.useState)(J),b=Object(l.a)(s,2),O=b[0],p=b[1],m=Object(a.useState)(!1),h=Object(l.a)(m,2),x=h[0],_=h[1],g=Object(a.useState)(""),y=Object(l.a)(g,2),N=y[0],w=y[1],I=Object(a.useState)(!1),C=Object(l.a)(I,2),D=C[0],B=C[1],L=Object(T.h)().id,F=function(){var t=Object(u.a)(o.a.mark((function t(){return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:B(!0),e?S(r,P(),null!==O&&void 0!==O?O:J,L).then((function(){_(!0)})).catch((function(){B(!1)})):k(r,P(),null!==O&&void 0!==O?O:J).then((function(t){"string"===typeof t&&w(t),_(!0)})).catch((function(){B(!1)}));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();if(x&&!e)return Object(d.jsx)(T.a,{to:"lobby/".concat(N)});if(x&&e)return Object(d.jsx)(T.a,{to:"../lobby/".concat(L)});return Object(d.jsx)("div",{className:"page home",children:Object(d.jsxs)("div",{className:"home__container",children:[Object(d.jsx)("div",{className:"title",children:Object(d.jsx)(f,{content:"Tarot"})}),e&&Object(d.jsx)("div",{className:"",children:Object(d.jsx)(f,{content:"You've been invited!"})}),Object(d.jsxs)("div",{className:"home__avatar_container pseudo_container",children:[Object(d.jsx)(j,{refreshAvatar:function(){i(A())},url:r}),Object(d.jsxs)("div",{className:"home__pseudo_container avatar_container",children:[Object(d.jsx)(f,{content:"Choose a character and a name"}),Object(d.jsx)("input",{type:"text",className:"home__pseudo",onChange:function(t){return p(t.target.value)},placeholder:J}),Object(d.jsx)(v,{disabled:D,label:e?"Join":"Create game",onClick:F})]})]})]})})}var F=function(t){var e=Object(a.useState)(),n=Object(l.a)(e,2),c=n[0],r=n[1],i=Object(a.useState)(!0),s=Object(l.a)(i,2),o=s[0],u=s[1],b=Object(a.useState)(null),d=Object(l.a)(b,2),j=d[0];d[1];return Object(a.useEffect)((function(){var e=Object(p.d)(Object(p.b)(g.db,"games",t),(function(t){r(t.data()),console.log(c),u(!1)}));return function(){return e()}}),[]),{data:c,isPending:o,error:j}},G=n.p+"static/media/cross.d29624d7.svg",M=n.p+"static/media/crown.653bacee.png";n(65);function R(){var t,e=Object(a.useState)(""),n=Object(l.a)(e,2),c=n[0],r=n[1],i=Object(a.useState)(!1),s=Object(l.a)(i,2),o=s[0],u=s[1],b=Object(T.h)().id,j=F(null!==b&&void 0!==b?b:""),O=(j.error,j.isPending,j.data);if(o)return Object(d.jsx)(T.a,{to:"../../"});var p=function(){var t=null===O||void 0===O?void 0:O.users.find((function(t){return t.id===N()}));return!!t&&!!(null===t||void 0===t?void 0:t.admin)};(null===O||void 0===O?void 0:O.blackList)&&(null===O||void 0===O?void 0:O.blackList.includes(N()))&&u(!0);var m="Start the game";return window.screen.width<=636&&(m="Start"),Object(d.jsx)("div",{className:"page lobby",children:Object(d.jsxs)("div",{className:"lobby__container",children:[Object(d.jsx)("div",{className:"title",children:Object(d.jsx)(f,{content:"Tarot"})}),Object(d.jsxs)("div",{className:"lobby__invite",children:[Object(d.jsx)(v,{label:"Invite",onClick:function(){r("");var t="".concat("".concat("localhost"===window.location.hostname?"http://localhost:3000/":"https://tarot-b3e06.firebaseapp.com/"),"invite/").concat(b);navigator.clipboard.writeText(t).then((function(){r("Link copied!")}),(function(t){r("An error has occured")}))}}),Object(d.jsx)(f,{content:c})]}),E(null!==(t=null===O||void 0===O?void 0:O.users)&&void 0!==t?t:[],b),Object(d.jsxs)("div",{className:"lobby__start_container lobby_item_mobile",children:[p()&&Object(d.jsx)("div",{className:"lobby__start_message",children:Object(d.jsx)(f,{content:"Ready to play ?"})}),p()&&Object(d.jsx)(v,{label:m,onClick:function(){console.log("start")}})]})]})})}function E(t,e){var n=function(n){var a=t.find((function(t){return t.id===n})),c=t.find((function(t){return t.id===N()}));a&&!a.admin&&c.admin&&function(t,e){C.apply(this,arguments)}(n,e)};return Object(d.jsx)("div",{className:"lobby__list",children:t.map((function(e,a){return Object(d.jsxs)("div",{className:"lobby__item",children:[Object(d.jsx)(j,{url:e.url,small:!0}),Object(d.jsx)("div",{className:"lobby__spacing"}),Object(d.jsx)(f,{content:null===e||void 0===e?void 0:e.name}),(e.admin||!!t.find((function(t){return t.id===N()})).admin)&&Object(d.jsx)("img",{alt:"remove user",onClick:function(){n(e.id)},src:e.admin?M:G,className:"lobby__svg ".concat(e.admin?"":"lobby__svg_clickable")})]},a)}))})}var Q=n(28);var U=function(){return Object(d.jsx)(Q.a,{children:Object(d.jsx)("div",{children:Object(d.jsxs)(T.d,{children:[Object(d.jsx)(T.b,{path:"/lobby/:id",element:Object(d.jsx)(R,{})}),Object(d.jsx)(T.b,{path:"/invite/:id",element:Object(d.jsx)(L,{invited:!0})}),Object(d.jsx)(T.b,{path:"/",element:Object(d.jsx)(L,{})})]})})})},z=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,67)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,i=e.getTTFB;n(t),a(t),c(t),r(t),i(t)}))};i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(U,{})}),document.getElementById("root")),z()}},[[66,1,2]]]);
//# sourceMappingURL=main.d21f5a23.chunk.js.map